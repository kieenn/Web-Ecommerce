{% extends '../base/base.html' %} 
{% block title %} Detail {% endblock %}
{% block content %}
<div class="container">
  <section class="py-5 ">
    <div class="row gx-5 ">
      <aside class="col-lg-6">
          <div class="border-0 mb-3 d-flex justify-content-center ">
            <img
              id="main-image"
              style="width: 500px; height: 500px; margin: auto; object-fit: contain;"
              class="rounded-4 fit"
              src=""
              alt="Product Image"
            />
          </div>
        <div class="d-flex justify-content-center mb-3" id="image-thumbnails">
          <!-- Thumbnails will be populated here by jQuery -->
        </div>
      </aside>
      <main class="col-lg-6">
        <div class="ps-lg-3">
          <h4 class="title text-dark" id="product-name"></h4>
          <div class="d-flex flex-row my-3">
            <span class="text-muted" id="product-orders"></span>
            <span class="text-success ms-2" id="product-stock-status"></span>
          </div>

          <div class="mb-3">
            <span class="h5" id="product-price"></span>
          </div>
          <div class="container" style="display: block">
            <div class="row mb-4">
              <div class="row-mb-3">
                <label class="md-2">Color</label>
                <select class="form-select border border-secondary" style="height: 35px" id="product-color">
                  <!-- Color options will be populated here by jQuery -->
                </select>
              </div>

              <div class="row-mb-3">
                <label class="md-2">Size</label>
                <select class="form-select border border-secondary" style="height: 35px" id="product-size">
                  <!-- Size options will be populated here by jQuery -->
                </select>
              </div>

              <div class="row-md-3 mb-3">
                <label class="mb-2 d-block">Quantity</label>
                <div class="input-group mb-3" style="width: 170px">
                  <button
                    class="btn btn-white border border-secondary px-3"
                    type="button"
                    id="button-addon1"
                    data-mdb-ripple-color="dark"
                  >
                    -
                  </button>
                  <input
                    type="text"
                    class="form-control text-center border border-secondary"
                    value="1"
                    aria-label="Example text with button addon"
                    aria-describedby="button-addon1"
                    id="quantity-input"
                    oninput="this.value = this.value.replace(/[^0-9]/g, ''); if(this.value < 1) this.value = 1;"
                  />
                  <button
                    class="btn btn-white border border-secondary px-3"
                    type="button"
                    id="button-addon2"
                    data-mdb-ripple-color="dark"
                  >
                    +
                  </button>
                </div>
              </div>
              
              <button class="add-to-cart" style="width: 100%;">
                <i class="me-1 fa fa-shopping-basket"></i> Add to cart
              </button>
            </div>
          </div>
        </div>
      </main>
    </div>
  </section>

  <section class="py-5 ">
    <div class="container shadow-sm p-3 mb-5 bg-body rounded-3">
      <div class="py-2 ">
        <div class="nav nav-pills nav-justified mb-3" id="ex1" role="tablist">
          <div class="nav-item d-flex" role="presentation">
            <button
              class="btn d-flex align-items-center justify-content-center w-100 active"
              id="ex1-tab-1"
              role="tab"
              aria-controls="ex1-pills-1"
              aria-selected="true"
              data-tab="description"
              style="background-color: #0d6efd; border: none;"
              onclick="activateTab('description')">Description</button>
          </div>
          <div class="nav-item d-flex" role="presentation">
            <button
              class="btn d-flex align-items-center justify-content-center w-100"
              id="ex1-tab-2"
              role="tab"
              aria-controls="ex1-pills-2"
              aria-selected="false"
              data-tab="summary"
              style="border: none;"
              onclick="activateTab('summary')">Summary</button>
          </div>
        </div>

        <div class="tab-content" id="ex1-content">
          <div
            class="tab-pane fade show active"
            id="description"
            role="tabpanel"
            aria-labelledby="ex1-tab-1"
          >
            <p class="description-content" id="product-description"></p>
          </div>
          <div
            class="tab-pane fade"
            id="summary"
            role="tabpanel"
            aria-labelledby="ex1-tab-2"
          >
            <p id="product-summary"></p>
          </div>
        </div>
      </div>
    </div>
  </section>
 <section class="products">
            <div class="toolbar">
               Product related

            </div>

            <div class="product-grid" id="productGrid">
               
            </div>
        </section>
</div>
<script>
  $(document).ready(function() {
    const productData = JSON.parse(sessionStorage.getItem("productDetail"));
    // alert(productData.attributes.Size[1])
    if (productData) {
      $('#main-image').attr('src', productData.images[0]); // Changed index to 0
      $('#product-name').text(productData.name);
      $('#product-description').text(productData.description);
      $('#product-summary').text(productData.summary);
      $('#product-price').text(productData.price + '$');
      $('#product-orders').html(`</i>${productData.quantity} orders`);
      $('#product-stock-status').text(productData.quantity > 0 ? 'In stock' : 'Out of stock');

      // Use forEach for color options
      productData.attributes.Color.forEach(color => {
        $('#product-color').append(`<option>${color}</option>`);
      });

      // Use forEach for size options
      productData.attributes.Size.forEach(size => {
        $('#product-size').append(`<option>${size}</option>`);
      });

      // Use forEach for images
      productData.images.forEach(image => {
        $('#image-thumbnails').append(`
          <a class="border mx-1 rounded-2 item-thumb" href="#" data-image="${image}">
            <img width="60" height="60" class="rounded-2" src="${image}" />
          </a>
        `);
      });

    }
  });
</script>
<style>
  .icon-hover:hover {
    border-color: #3b71ca !important;
    background-color: white !important;
    color: #3b71ca !important;
  }

  .icon-hover:hover i {
    color: #3b71ca !important;
  }
</style>
{% endblock %}
